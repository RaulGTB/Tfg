<main class="main-content">
  <section class="section-categories py-5 bg-black">
    <div class="container">
      <h2 class="section-title mb-5">CATEGORÍAS</h2>

      <!-- === League of Legends === -->
      <div class="game-block">
        <h3 class="game-title mb-3">League of Legends</h3>
        <div class="game-filters">
          <button (click)="currentViewLoL === 'leagues' ? currentViewLoL = '' : currentViewLoL = 'leagues'"
            class="btn btn-outline-light btn-sm" [ngClass]="{'active': currentViewLoL === 'leagues'}">Ligas</button>
          <button (click)="currentViewLoL === 'series' ? currentViewLoL = '' : currentViewLoL = 'series'"
            class="btn btn-outline-light btn-sm" [ngClass]="{'active': currentViewLoL === 'series'}">Series</button>
          <button (click)="currentViewLoL === 'tournaments' ? currentViewLoL = '' : currentViewLoL = 'tournaments'"
            class="btn btn-outline-light btn-sm"
            [ngClass]="{'active': currentViewLoL === 'tournaments'}">Torneos</button>
          <button (click)="currentViewLoL === 'matches' ? currentViewLoL = '' : currentViewLoL = 'matches'"
            class="btn btn-outline-light btn-sm" [ngClass]="{'active': currentViewLoL === 'matches'}">Partidos</button>
        </div>

        @if (currentViewLoL === 'leagues') {
        <div class="row g-4 mt-4">
          @for (league of lolLeagues; track league.id) {
          <div class="col-12 col-md-6 col-xl-4">
            <div class="card card-league h-100 text-center">
              <!-- Logo/imagen de la liga -->
              <img *ngIf="league.image_url" [src]="league.image_url" class="card-img-top img-fluid p-3"
                [alt]="league.name" />

              <div class="card-body p-3">
                <h5 class="card-title mb-2">{{ league.name }}</h5>
                <p class="small mb-1">
                  <i class="bi bi-globe2 me-1 text-primary"></i>
                  {{ league.region || 'Global' }}
                </p>
                <span class="badge bg-secondary text-uppercase small">
                  {{ formatSlug(league.slug) }}
                </span>
              </div>
            </div>
          </div>
          }
        </div>
        }

        @if (currentViewLoL === 'series') {
        <div class="row g-4 mt-4">
          @for (serie of lolSeries; track serie.id) {
          <div class="col-12 col-md-6 col-xl-4">
            <div class="card card-series h-100">
              <div class="card-body d-flex flex-column gap-2">
                <h5 class="text-info fw-bold mb-1">{{ serie.full_name || serie.name }}</h5>
                <p class="mb-0 small text-light">
                  <i class="bi bi-trophy me-2 text-warning"></i>{{ serie.league?.name || 'Liga desconocida' }}
                </p>
                <p class="mb-0 small text-light">
                  <i class="bi bi-calendar me-2 text-warning"></i>
                  {{ serie.begin_at | date:'MMM d, y' }} - {{ serie.end_at | date:'MMM d, y' }}
                </p>
                <span class="badge badge-custom mt-auto align-self-start">
                  {{ serie.season ? (serie.season + ' ' + serie.year) : serie.year }}
                </span>
              </div>
            </div>
          </div>
          }
        </div>
        }

        @if (currentViewLoL === 'matches') {
        <div class="row g-4 mt-4">
          @for (match of lolMatches; track $index) {
          <div class="col-12 col-md-6 col-xl-4">
            <div class="card card-match h-100">
              <div class="d-flex justify-content-between align-items-center mb-2">
                <div class="text-white small fw-semibold">
                  {{ match.league.name }}
                </div>
                <span class="badge badge-custom text-uppercase">
                  {{ formatSlug(match.tournament.slug) }}
                </span>
              </div>
              <div class="card-body p-0">
                <h5 class="match-title mb-3">{{ match.name }}</h5>
                <ul class="list-unstyled match-info mb-0">
                  <li class="mb-1">
                    <i class="bi bi-calendar-event me-2 text-warning"></i>
                    {{ match.begin_at | date: 'fullDate' }} – {{ match.begin_at | date: 'shortTime' }}
                  </li>
                  <li class="mb-1">
                    <i class="bi bi-globe-americas me-2 text-primary"></i>
                    Región: {{ match.tournament.region || 'N/A' }} | País: {{ match.tournament.country || 'N/A' }}
                  </li>
                  <li class="mb-1">
                    <i class="bi bi-controller me-2 text-success"></i>
                    Formato: Bo{{ match.number_of_games }}
                  </li>
                  <li>
                    <i class="bi bi-circle me-2" [ngClass]="{
                          'text-success': match.status === 'finished',
                          'text-warning': match.status === 'running',
                          'text-muted': match.status === 'not_started'
                        }"></i>
                    Estado: {{ match.status | titlecase }}
                  </li>
                </ul>
              </div>
            </div>
          </div>
          }
        </div>
        }
      </div>

      <!-- === CS:GO === -->
      <div class="game-block">
        <h3 class="game-title mb-3">CS:GO</h3>
        <div class="game-filters">
          <button (click)="currentViewCSGO === 'leagues' ? currentViewCSGO = '' : currentViewCSGO = 'leagues'"
            class="btn btn-outline-light btn-sm" [ngClass]="{'active': currentViewCSGO === 'leagues'}">Ligas</button>
          <button (click)="currentViewCSGO === 'series' ? currentViewCSGO = '' : currentViewCSGO = 'series'"
            class="btn btn-outline-light btn-sm" [ngClass]="{'active': currentViewCSGO === 'series'}">Series</button>
          <button (click)="currentViewCSGO === 'tournaments' ? currentViewCSGO = '' : currentViewCSGO = 'tournaments'"
            class="btn btn-outline-light btn-sm"
            [ngClass]="{'active': currentViewCSGO === 'tournaments'}">Torneos</button>
          <button (click)="currentViewCSGO === 'matches' ? currentViewCSGO = '' : currentViewCSGO = 'matches'"
            class="btn btn-outline-light btn-sm" [ngClass]="{'active': currentViewCSGO === 'matches'}">Partidos</button>
        </div>

        @if (currentViewCSGO === 'leagues') {
        <div class="row g-4 mt-4">
          @for (league of CSGOLeagues; track league.id) {
          <div class="col-12 col-md-6 col-xl-4">
            <div class="card card-league h-100 text-center">
              <!-- Logo/imagen de la liga -->
              <img *ngIf="league.image_url" [src]="league.image_url" class="card-img-top img-fluid p-3"
                [alt]="league.name" />

              <div class="card-body p-3">
                <h5 class="card-title mb-2">{{ league.name }}</h5>
                <p class="small mb-1">
                  <i class="bi bi-globe2 me-1 text-primary"></i>
                  {{ league.region || 'Global' }}
                </p>
                <span class="badge bg-secondary text-uppercase small">
                  {{ formatSlug(league.slug) }}
                </span>
              </div>
            </div>
          </div>
          }
        </div>
        }

        @if (currentViewCSGO === 'series') {
        <div class="row g-4 mt-4">
          @for (serie of CSGOSeries; track serie.id) {
          <div class="col-12 col-md-6 col-xl-4">
            <div class="card card-series h-100">
              <div class="card-body d-flex flex-column gap-2">
                <h5 class="text-info fw-bold mb-1">{{ serie.full_name || serie.name }}</h5>
                <p class="mb-0 small text-light">
                  <i class="bi bi-trophy me-2 text-warning"></i>{{ serie.league?.name || 'Liga desconocida' }}
                </p>
                <p class="mb-0 small text-light">
                  <i class="bi bi-calendar me-2 text-warning"></i>
                  {{ serie.begin_at | date:'MMM d, y' }} - {{ serie.end_at | date:'MMM d, y' }}
                </p>
                <span class="badge badge-custom mt-auto align-self-start">
                  {{ serie.season ? (serie.season + ' ' + serie.year) : serie.year }}
                </span>
              </div>
            </div>
          </div>
          }
        </div>
        }

        @if (currentViewCSGO === 'matches') {
        <div class="row g-4 mt-4">
          @for (match of CSGOMatches; track $index) {
          <div class="col-12 col-md-6 col-xl-4">
            <div class="card card-match h-100">
              <div class="d-flex justify-content-between align-items-center mb-2">
                <div class="text-white small fw-semibold">
                  {{ match.league.name }}
                </div>
                <span class="badge badge-custom text-uppercase">
                  {{ formatSlug(match.tournament.slug) }}
                </span>
              </div>
              <div class="card-body p-0">
                <h5 class="match-title mb-3">{{ match.name }}</h5>
                <ul class="list-unstyled match-info mb-0">
                  <li class="mb-1">
                    <i class="bi bi-calendar-event me-2 text-warning"></i>
                    {{ match.begin_at | date: 'fullDate' }} – {{ match.begin_at | date: 'shortTime' }}
                  </li>
                  <li class="mb-1">
                    <i class="bi bi-globe-americas me-2 text-primary"></i>
                    Región: {{ match.tournament.region || 'N/A' }} | País: {{ match.tournament.country || 'N/A' }}
                  </li>
                  <li class="mb-1">
                    <i class="bi bi-controller me-2 text-success"></i>
                    Formato: Bo{{ match.number_of_games }}
                  </li>
                  <li>
                    <i class="bi bi-circle me-2" [ngClass]="{
                          'text-success': match.status === 'finished',
                          'text-warning': match.status === 'running',
                          'text-muted': match.status === 'not_started'
                        }"></i>
                    Estado: {{ match.status | titlecase }}
                  </li>
                </ul>
              </div>
            </div>
          </div>
          }
        </div>
        }
      </div>

      <!-- === Dota 2 === -->
      <div class="game-block">
        <h3 class="game-title mb-3">Dota 2</h3>
        <div class="game-filters">
          <button (click)="currentViewDota2 === 'leagues' ? currentViewDota2 = '' : currentViewDota2 = 'leagues'"
            class="btn btn-outline-light btn-sm" [ngClass]="{ 'active': currentViewDota2 === 'leagues' }">Ligas</button>
          <button (click)="currentViewDota2 === 'series' ? currentViewDota2 = '' : currentViewDota2 = 'series'"
            class="btn btn-outline-light btn-sm" [ngClass]="{ 'active': currentViewDota2 === 'series' }">Series</button>
          <button
            (click)="currentViewDota2 === 'tournaments' ? currentViewDota2 = '' : currentViewDota2 = 'tournaments'"
            class="btn btn-outline-light btn-sm"
            [ngClass]="{ 'active': currentViewDota2 === 'tournaments' }">Torneos</button>
          <button (click)="currentViewDota2 === 'matches' ? currentViewDota2 = '' : currentViewDota2 = 'matches'"
            class="btn btn-outline-light btn-sm"
            [ngClass]="{ 'active': currentViewDota2 === 'matches' }">Partidos</button>
        </div>

        @if (currentViewDota2 === 'leagues') {
        <div class="row g-4 mt-4">
          @for (league of dota2Leagues; track league.id) {
          <div class="col-12 col-md-6 col-xl-4">
            <div class="card card-league h-100 text-center">
              <!-- Logo/imagen de la liga -->
              <img *ngIf="league.image_url" [src]="league.image_url" class="card-img-top img-fluid p-3"
                [alt]="league.name" />

              <div class="card-body p-3">
                <h5 class="card-title mb-2">{{ league.name }}</h5>
                <p class="small mb-1">
                  <i class="bi bi-globe2 me-1 text-primary"></i>
                  {{ league.region || 'Global' }}
                </p>
                <span class="badge bg-secondary text-uppercase small">
                  {{ formatSlug(league.slug) }}
                </span>
              </div>
            </div>
          </div>
          }
        </div>
        }

        @if (currentViewDota2 === 'series') {
        <div class="row g-4 mt-4">
          @for (serie of dota2Series; track serie.id) {
          <div class="col-12 col-md-6 col-xl-4">
            <div class="card card-series h-100">
              <div class="card-body d-flex flex-column gap-2">
                <h5 class="text-info fw-bold mb-1">{{ serie.full_name || serie.name }}</h5>
                <p class="mb-0 small text-light">
                  <i class="bi bi-trophy me-2 text-warning"></i>{{ serie.league?.name || 'Liga desconocida' }}
                </p>
                <p class="mb-0 small text-light">
                  <i class="bi bi-calendar me-2 text-warning"></i>
                  {{ serie.begin_at | date:'MMM d, y' }} - {{ serie.end_at | date:'MMM d, y' }}
                </p>
                <span class="badge badge-custom mt-auto align-self-start">
                  {{ serie.season ? (serie.season + ' ' + serie.year) : serie.year }}
                </span>
              </div>
            </div>
          </div>
          }
        </div>
        }

        @if (currentViewDota2 === 'matches') {
        <div class="row g-4 mt-4">
          @for (match of dota2Matches; track $index) {
          <div class="col-12 col-md-6 col-xl-4">
            <div class="card card-match h-100">
              <div class="d-flex justify-content-between align-items-center mb-2">
                <div class="text-white small fw-semibold">
                  {{ match.league.name }}
                </div>
                <span class="badge badge-custom text-uppercase">
                  {{ formatSlug(match.tournament.slug) }}
                </span>
              </div>
              <div class="card-body p-0">
                <h5 class="match-title mb-3">{{ match.name }}</h5>
                <ul class="list-unstyled match-info mb-0">
                  <li class="mb-1">
                    <i class="bi bi-calendar-event me-2 text-warning"></i>
                    {{ match.begin_at | date: 'fullDate' }} – {{ match.begin_at | date: 'shortTime' }}
                  </li>
                  <li class="mb-1">
                    <i class="bi bi-globe-americas me-2 text-primary"></i>
                    Región: {{ match.tournament.region || 'N/A' }} | País: {{ match.tournament.country || 'N/A' }}
                  </li>
                  <li class="mb-1">
                    <i class="bi bi-controller me-2 text-success"></i>
                    Formato: Bo{{ match.number_of_games }}
                  </li>
                  <li>
                    <i class="bi bi-circle me-2" [ngClass]="{
                    'text-success': match.status === 'finished',
                    'text-warning': match.status === 'running',
                    'text-muted': match.status === 'not_started'
                  }"></i>
                    Estado: {{ match.status | titlecase }}
                  </li>
                </ul>
              </div>
            </div>
          </div>
          }
        </div>
        }
      </div>
    </div>
  </section>
</main>
