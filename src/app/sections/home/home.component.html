<main class="home-page">
  <section class="section-hero">
    <div class="overlay"></div>
    <div class="container hero-content text-center fade-up">
      <h1 class="display-3 fw-bold mb-3">RJK SCORE</h1>
      <p class="lead text-muted-soft">Your live eSports platform for scores and rewards</p>
    </div>
  </section>

  <section class="section-dark py-5">
    <div class="container">
      <div class="row g-4 justify-content-center">
        <div class="col-6 col-md-3" *ngFor="let g of gameCards; let i = index" (click)="toggleCard(i)" class="glow-hover">
          <div class="card-dark text-center">
            <div class="ratio ratio-1x1 mb-3 rounded overflow-hidden">
              <img [src]="g.img" [alt]="g.name" class="w-100 h-100 object-fit-cover" />
            </div>
            <h5 class="fw-bold mb-2">{{ g.name }}</h5>
            <p class="small text-muted-soft">{{ g.desc }}</p>
          </div>
        </div>
      </div>
    </div>
  </section>

  <section class="section-dark py-5">
    <div class="container">
      <div class="d-flex flex-wrap gap-3 align-items-center mb-4">
        <span class="text-muted-soft">Filter:</span>
        <button (click)="filteredGames = games" class="btn btn-accent btn-sm">All</button>
        <button (click)="filtrarLol()" class="btn btn-accent btn-sm">LoL</button>
        <button (click)="filtrarDota2()" class="btn btn-accent btn-sm">Dota 2</button>
        <button (click)="filtrarCsgo()" class="btn btn-accent btn-sm">CS:GO</button>
        <button (click)="FiltrarOtros()" class="btn btn-accent btn-sm">Others</button>
      </div>
      <h2 class="h4 text-accent mb-4">Live Today</h2>
      <div class="row g-4">
        @for (f of filteredGames.slice(0, 10); track $index) {
        <div class="col-12 col-md-6">
          <div class="card-dark h-100 glow-hover">
            <h5 class="mb-2 text-accent"><i class="bi bi-trophy-fill me-2"></i>{{ f.name }}</h5>
            <p class="mb-1"><strong>Videogame:</strong> {{ f.class_name }}</p>
            <small class="text-success d-block mt-2"><i class="bi bi-broadcast-pin me-1"></i>Live broadcast</small>
          </div>
        </div>
        }
      </div>
    </div>
  </section>

  <section class="section-dark py-5">
    <div class="container">
      <div class="d-flex flex-wrap gap-3 align-items-center mb-4">
        <span class="text-muted-soft">Show:</span>
        <button (click)="getPlayers()" class="btn btn-accent btn-sm">Players</button>
        <button (click)="getTeams()" class="btn btn-accent btn-sm">Teams</button>
        <button (click)="getMatches()" class="btn btn-accent btn-sm">Matches</button>
      </div>
      <h2 class="h4 text-accent mb-4">A Bit Of Everything</h2>
      <div class="row g-4" *ngIf="currentView === 'players'">
        @for (p of players; track $index) {
        <div class="col-12 col-md-6">
          <div class="card-dark h-100 glow-hover text-center">
            <h5 class="mb-2 text-accent"><i class="bi bi-person-fill me-2"></i>{{ p.name }}</h5>
            <p class="mb-1"><strong>Real name:</strong> {{ p.first_name || 'Unknown' }}</p>
            <p class="mb-1"><strong>Videogame:</strong> {{ p.current_videogame.name }}</p>
            <button class="btn btn-accent btn-sm mt-3 w-100" (click)="addToFavorites('player', p.id)"><i class="bi bi-star-fill"></i> Save</button>
          </div>
        </div>
        }
      </div>

      <div class="row g-4" *ngIf="currentView === 'teams'">
        @for (p of teams; track $index) {
        <div class="col-12 col-md-6">
          <div class="card-dark h-100 glow-hover text-center">
            <h5 class="mb-2 text-accent"><i class="bi bi-people-fill me-2"></i>{{ p.name }}</h5>
            <p class="mb-1"><strong>Location:</strong> {{ p.location || 'Unknown' }}</p>
            <p class="mb-1"><strong>Videogame:</strong> {{ p.current_videogame.name }}</p>
            <button class="btn btn-accent btn-sm mt-3 w-100" (click)="addToFavorites('team', p.id)"><i class="bi bi-star-fill"></i> Save</button>
          </div>
        </div>
        }
      </div>

      <div *ngIf="currentView === 'matches'">
        @for (p of matches; track $index) {
        @if (p.opponents?.length === 2) {
        <div class="card-dark glow-hover p-3 mb-3">
          <div class="d-flex justify-content-between align-items-center mb-2">
            <div class="text-center w-25">
              <img [src]="p.opponents[0].opponent.image_url" class="img-fluid rounded mb-2" style="max-width:60px" />
              <p class="mb-0 small">{{ p.opponents[0].opponent.name }}</p>
            </div>
            <div class="text-center w-50">
              <p class="fw-bold mb-1">VS</p>
              <p class="mb-0"><strong>Videogame:</strong> {{ p.videogame?.name || 'Unknown' }}</p>
            </div>
            <div class="text-center w-25">
              <img [src]="p.opponents[1].opponent.image_url" class="img-fluid rounded mb-2" style="max-width:60px" />
              <p class="mb-0 small">{{ p.opponents[1].opponent.name }}</p>
            </div>
          </div>
          <small class="text-success d-block text-center"><i class="bi bi-broadcast-pin me-1"></i>Live stream</small>
          <button class="btn btn-accent btn-sm mt-3 w-100" (click)="addToFavorites('match', p.id)"><i class="bi bi-star-fill"></i> Save</button>
        </div>
        }
        }
      </div>
    </div>
  </section>

  <section class="section-dark py-5">
    <div class="container">
      <h2 class="h4 text-accent mb-4">Rewards</h2>
      <div class="row g-4 justify-content-center">
        <div class="col-12 col-md-4">
          <div class="card-dark text-center p-4 glow-hover">
            <h4 class="mb-3">üí∞ 500 coins</h4>
            <p class="mb-0">For watching 3 live matches</p>
          </div>
        </div>
        <div class="col-12 col-md-4">
          <div class="card-dark text-center p-4 glow-hover">
            <h4 class="mb-3">üÜï Sign Up</h4>
            <p class="mb-0">For signing up on the platform</p>
          </div>
        </div>
        <div class="col-12 col-md-4">
          <div class="card-dark text-center p-4 glow-hover">
            <h4 class="mb-3">üèÖ Golden badge</h4>
            <p class="mb-0">For logging in 7 days in a row</p>
          </div>
        </div>
      </div>
    </div>
  </section>
</main>
