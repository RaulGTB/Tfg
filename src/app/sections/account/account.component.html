<section class="section-account py-5 fade-up">
  <div class="container">
    <h2 class="text-center text-accent mb-5">Tu Cuenta</h2>
    <form #form="ngForm" (ngSubmit)="saveChanges()" novalidate class="mx-auto" style="max-width:500px;">
      <div class="mb-3">
        <label for="name" class="form-label">Nombre</label>
        <small class="text-muted-soft d-block mb-1">Actual: {{ user?.username }}</small>
        <input type="text" id="name" class="form-control" [(ngModel)]="editName" name="name" required />
      </div>
      <div class="mb-3">
        <label for="email" class="form-label">Email</label>
        <small class="text-muted-soft d-block mb-1">Actual: {{ user?.email }}</small>
        <input type="email" id="email" class="form-control" [(ngModel)]="editEmail" name="email" required email />
      </div>
      <div class="mb-3 position-relative">
        <label for="password" class="form-label">Nueva Contrase침a</label>
        <input [type]="passwordVisible ? 'text' : 'password'" id="password" class="form-control" [(ngModel)]="editPassword" name="password" />
        <button type="button" class="btn btn-accent btn-sm position-absolute end-0 top-50 translate-middle-y" (click)="passwordVisible = !passwordVisible" [attr.aria-label]="passwordVisible ? 'Ocultar contrase침a' : 'Mostrar contrase침a'">
          <i [class]="passwordVisible ? 'bi bi-eye-slash' : 'bi bi-eye'"></i>
        </button>
      </div>
      <button class="btn btn-accent w-100" type="submit" [disabled]="loading || !form.form.valid">{{ loading ? 'Guardando...' : 'Guardar cambios' }}</button>
      <div class="mt-3 text-center">
        <small class="text-success">{{ message }}</small>
        <small class="text-danger">{{ error }}</small>
      </div>
    </form>
    <div class="text-center mt-4">
      <button class="btn btn-accent me-3" (click)="logout()">Cerrar sesi칩n</button>
      <button class="btn btn-accent" (click)="refreshUser()">Actualizar datos</button>
    </div>
  </div>
</section>
